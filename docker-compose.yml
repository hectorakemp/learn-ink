version: "3"

services:
  appsmith:
    image: index.docker.io/appsmith/appsmith-ce
    container_name: appsmith
    ports:
      - "3080:80"
      - "3443:443"
    volumes:
      - ./stacks:/appsmith-stacks
    restart: unless-stopped
  mongodb:
    image: mongo:latest
    container_name: mongo
    environment:
      MONGO_INITDB_ROOT_USERNAME: learnink
      MONGO_INITDB_ROOT_PASSWORD: chandler
    restart: always
# appsmith  |     "user" : "appsmith",
# appsmith  |     "roles" : [
# appsmith  |             {
# appsmith  |                     "role" : "root",
# appsmith  |                     "db" : "admin"
# appsmith  |             },
# appsmith  |             "readWrite"
# appsmith  |     ]
# appsmith  | }
  #   # Uncomment the lines below to enable auto-update
  #   labels:
  #     com.centurylinklabs.watchtower.enable: "true"

  # auto_update:
  #   image: containrrr/watchtower:latest-dev
  #   volumes:
  #     - /var/run/docker.sock:/var/run/docker.sock
  #   # Update check interval in seconds.
  #   command: --schedule "0 0 * ? * *" --label-enable --cleanup
  #   restart: unless-stopped
